(this["webpackJsonpfgo-teamup"]=this["webpackJsonpfgo-teamup"]||[]).push([[12],{112:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))},1732:function(e,t,a){"use strict";a.r(t);var r=a(112),n=a(35),s=a(36),i=a(38),o=a(37),l=a(0),c=a.n(l),h=a(121),u=a(1713),d=a(1729),m=a(92),g=a(1728),f=a(1714),v=a(1682),p=a(1711),w=a(123),y=a.n(w),E=a(117),k=a(107),C=[{question:"\u6e38\u620f\u5185\u6709\u591a\u5c11\u79cd\u989c\u8272\u7684\u6307\u4ee4\u5361\uff1f",answer:"3"},{question:"\u73a9\u5bb6\u6700\u9ad8\u53ef\u4ee5\u4fdd\u5b58\u591a\u5c11\u5212\u4ee4\u5492\uff1f",answer:"3"},{question:"\u5341\u8fde\u6b21\u53ec\u5524\u9700\u8981\u6d88\u8017\u591a\u5c11\u9897\u5723\u6676\u77f3\uff1f",answer:"30"},{question:"\u5355\u6b21\u53ec\u5524\u9700\u8981\u6d88\u8017\u591a\u5c11\u9897\u5723\u6676\u77f3\uff1f",answer:"3"}],A=parseInt(4*Math.random()),b=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).toHomePage=function(){s.props.history.push("/")},s.setOpenAlert=function(e){s.setState({openAlert:e})},s.handleChangelogin=function(e){var t=e.target.id,a=e.target.value;s.setState(Object(r.a)({},t,a))},s.handleCheckBoxChange=function(e){var t=e.target.checked;s.setState({saveLogin:t})},s.handleChange=function(e){var t=e.target.id,a=e.target.value,r=JSON.parse(JSON.stringify(s.state));r[t]=a,s.setState({disableRegist:s.checkError(r)})},s.checkUsernameError=function(e){var t=e.username,a="";return 0===t.length?a="":/^[a-zA-Z0-9\u4e00-\u9fa5_]*$/.exec(t)?t.length<3?a="\u7528\u6237\u540d\u4e0d\u5f97\u5c11\u4e8e3\u4e2a\u5b57\u7b26":t.length>20&&(a="\u7528\u6237\u540d\u4e0d\u5f97\u591a\u4e8e20\u4e2a\u5b57\u7b26"):a="\u7528\u6237\u540d\u53ea\u80fd\u7531\u4e2d\u6587\u3001\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u201c_\u201d\u7ec4\u6210",a},s.checkPasswordError=function(e){var t=e.password,a="";return 0===t.length?a="":/[a-zA-Z0-9]|_/.exec(t)?t.length<6?a="\u5bc6\u7801\u4e0d\u5f97\u5c11\u4e8e6\u4e2a\u5b57\u7b26":t.length>30&&(a="\u5bc6\u7801\u4e0d\u5f97\u591a\u4e8e30\u4e2a\u5b57\u7b26"):a="\u5bc6\u7801\u53ea\u80fd\u7531\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u201c_\u201d\u7ec4\u6210",a},s.checkVarifyQuestion=function(e){var t="";return 0===e.varifyQuestionAnswer.length?t="":e.varifyQuestionAnswer!==e.varifyQuestionAnswerStandard&&(t="\u9a8c\u8bc1\u95ee\u9898\u9519\u8bef"),t},s.checkVarifyEmail=function(e){var t=e.emailAddress,a="";return t.length>0&&!/^([A-Za-z0-9_\-.\u4e00-\u9fa5])+@([A-Za-z0-9_\-.])+.([A-Za-z]{2,8})$/.exec(t)&&(a="\u90ae\u4ef6\u5730\u5740\u65e0\u6548"),a},s.checkVarifyPasswordError=function(e){var t="";return 0===e.varifyPassword.length?t="":e.password!==e.varifyPassword&&(t="\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"),t},s.checkError=function(e){return!!(0===e.username.length||0===e.password.length||0===e.varifyPassword.length||0===e.varifyQuestionAnswer.length||s.checkUsernameError(e)||s.checkPasswordError(e)||s.checkVarifyPasswordError(e)||s.checkVarifyEmail(e))},s.handleClickRegister=function(){s.checkError(s.state)&&s.showAlert("\u4e0d\u8981\u6539\u6211\u7684\u7f51\u9875");var e=y()(s.state.password).toString(),t=!!s.state.saveLogin,a=s.state.emailAddress,r={name:s.state.username,password:e,email:a,rememberUser:t},n=JSON.stringify(r);s.setState({coolTime:4}),s.getFileFromCos(n)},s.coolDown=function(e){s.setState({coolTime:e}),--e>=0&&setTimeout((function(){return s.coolDown(e)}),1e3)},s.getButtonName=function(){return s.state.coolTime>3?"\u6ce8\u518c\u4e2d...":s.state.coolTime>0?"\u51b7\u5374\u4e2d(".concat(s.state.coolTime,")"):"\u6ce8 \u518c"},s.getFileFromCos=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){var e="",a="";try{var r=JSON.parse(t.responseText);e=r.data.data,a=r.data.loginToken}catch(n){return s.showAlert("\u672a\u8fde\u63a5\u5230\u670d\u52a1\u5668, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),void s.coolDown(3)}200===t.status?(sessionStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",s.state.username),localStorage.setItem("loginToken",a),s.toHomePage()):500===t.status?"username is already in use"===e?s.showAlert("\u7528\u6237\u540d\u5df2\u7ecf\u5b58\u5728"):(s.showAlert("\u670d\u52a1\u5668\u5f02\u5e38, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(t)):(s.showAlert("\u6ce8\u518c\u5931\u8d25, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(t)),s.coolDown(3)}};var a=k.e;console.log(a),t.open("POST",a,!0),t.setRequestHeader("Content-type","application/json"),t.send(e)},s.showAlert=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";s.setState({openAlert:!0,alertInfo:e,alertSeverity:t})},s.state={username:"",password:"",varifyPassword:"",emailAddress:"",varifyQuestion:C[A].question,varifyQuestionAnswerStandard:C[A].answer,varifyQuestionAnswer:"",openAlert:!1,alertInfo:"",alertSeverity:"success",coolTime:-1,disableRegist:!0,saveLogin:!0},s}return Object(s.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container",style:{minHeight:"100vh"}},c.a.createElement(h.a,null),c.a.createElement("div",{className:"loading"},c.a.createElement(u.a,{container:!0,justify:"center"},c.a.createElement(u.a,{item:!0,xs:10,sm:7},c.a.createElement(d.a,{style:{padding:"20px 20px 20px 20px"}},c.a.createElement(u.a,{container:!0,spacing:2,direction:"column"},c.a.createElement(u.a,{item:!0,container:!0},c.a.createElement(m.a,{variant:"h6"},"\u7528\u6237\u6ce8\u518c")),c.a.createElement(u.a,{item:!0},c.a.createElement(g.a,{required:!0,error:this.checkUsernameError(this.state).length>0,id:"username",label:"\u7528\u6237\u540d",variant:"outlined",fullWidth:!0,onBlur:this.handleChangelogin,onChange:this.handleChange,helperText:this.checkUsernameError(this.state)})),c.a.createElement(u.a,{item:!0},c.a.createElement(g.a,{required:!0,id:"password",label:"\u5bc6\u7801",variant:"outlined",fullWidth:!0,type:"password",onBlur:this.handleChangelogin,onChange:this.handleChange,error:this.checkPasswordError(this.state).length>0,helperText:this.checkPasswordError(this.state)})),c.a.createElement(u.a,{item:!0},c.a.createElement(g.a,{required:!0,id:"varifyPassword",label:"\u786e\u8ba4\u5bc6\u7801",variant:"outlined",fullWidth:!0,type:"password",onBlur:this.handleChangelogin,onChange:this.handleChange,error:this.checkVarifyPasswordError(this.state).length>0,helperText:this.checkVarifyPasswordError(this.state)})),c.a.createElement(u.a,{item:!0},c.a.createElement(g.a,{id:"emailAddress",label:"\u90ae\u7bb1\u5730\u5740",variant:"outlined",fullWidth:!0,onBlur:this.handleChangelogin,onChange:this.handleChange,error:this.checkVarifyEmail(this.state).length>0,helperText:this.checkVarifyEmail(this.state)})),c.a.createElement(u.a,{item:!0},c.a.createElement(g.a,{required:!0,id:"varifyQuestionAnswer",label:this.state.varifyQuestion,variant:"outlined",fullWidth:!0,onBlur:this.handleChangelogin,onChange:this.handleChange,error:this.checkVarifyQuestion(this.state).length>0,helperText:this.checkVarifyQuestion(this.state)})),c.a.createElement(u.a,{item:!0,container:!0},c.a.createElement(f.a,{control:c.a.createElement(v.a,{checked:this.state.saveLogin,onChange:this.handleCheckBoxChange,color:"primary"}),label:c.a.createElement(m.a,{variant:"body2",noWrap:!0},"7\u5929\u5185\u4fdd\u6301\u767b\u5f55\u72b6\u6001")})),c.a.createElement(u.a,{item:!0},c.a.createElement(p.a,{variant:"contained",color:"primary",fullWidth:!0,size:"large",onClick:this.handleClickRegister,disabled:this.state.coolTime>0||this.state.disableRegist},this.getButtonName())),c.a.createElement(u.a,{item:!0,container:!0},c.a.createElement(m.a,{variant:"body2",align:"left"},"\u7528\u6237\u7cfb\u7edf\u4ec5\u7528\u4e8e\u7ba1\u7406\u4e0a\u4f20\u7ec4\u961f, \u4e0d\u4fdd\u8bc1\u5b89\u5168\u6027, \u52a1\u5fc5\u4e0d\u8981\u4f7f\u7528\u5e38\u7528\u5bc6\u7801."))))),c.a.createElement(E.a,{open:this.state.openAlert,setOpen:this.setOpenAlert,info:this.state.alertInfo,severity:this.state.alertSeverity}))))}}]),a}(c.a.Component);t.default=b}}]);