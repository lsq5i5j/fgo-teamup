(this["webpackJsonpfgo-teamup"]=this["webpackJsonpfgo-teamup"]||[]).push([[13],{1770:function(e,t,a){"use strict";a.r(t);var n=a(35),o=a(36),r=a(38),s=a(37),i=a(0),l=a.n(i),c=a(121),m=a(1752),u=a(1768),d=a(92),h=a(1767),g=a(1753),p=a(1721),v=a(1750),f=a(40),w=a(123),E=a.n(w),y=a(117),S=a(107),C=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).toHomePage=function(){o.props.history.push("/")},o.setOpenAlert=function(e){o.setState({openAlert:e})},o.handleChangelogin=function(e){var t=e.target.id,a=e.target.value;"username"===t?o.setState({username:a}):"password"===t&&o.setState({password:a})},o.handleCheckBoxChange=function(e){var t=e.target.checked;o.setState({saveLogin:t})},o.handleClickLogin=function(){var e=E()(o.state.password).toString(),t=!!o.state.saveLogin,a={name:o.state.username,password:e,rememberUser:t},n=JSON.stringify(a);o.setState({coolTime:4}),o.getFileFromCos(n)},o.coolDown=function(e){o.setState({coolTime:e}),--e>=0&&setTimeout((function(){return o.coolDown(e)}),1e3)},o.getButtonName=function(){return o.state.coolTime>3?"\u767b\u5f55\u4e2d...":o.state.coolTime>0?"\u51b7\u5374\u4e2d(".concat(o.state.coolTime,")"):"\u767b \u5f55"},o.getFileFromCos=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){var e="",a="";try{var n=JSON.parse(t.responseText);e=n.data.data,a=n.data.loginToken}catch(r){return o.showAlert("\u672a\u8fde\u63a5\u5230\u670d\u52a1\u5668, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),void o.coolDown(3)}200===t.status?(sessionStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",o.state.username),localStorage.setItem("loginToken",a),o.toHomePage()):500===t.status?"wrong username or password"===e?o.showAlert("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"):(o.showAlert("\u670d\u52a1\u5668\u5f02\u5e38, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(e)):(o.showAlert("\u767b\u5f55\u5931\u8d25, \u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.log(t)),o.coolDown(3)}};var a=S.d;t.open("POST",a,!0),t.setRequestHeader("Content-type","application/json"),t.send(e)},o.showAlert=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";o.setState({openAlert:!0,alertInfo:e,alertSeverity:t})},o.state={username:"",password:"",openAlert:!1,alertInfo:"",alertSeverity:"success",coolTime:-1,saveLogin:!0},o}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container",style:{minHeight:"100vh"}},l.a.createElement(c.a,null),l.a.createElement("div",{className:"loading"},l.a.createElement(m.a,{container:!0,justify:"center"},l.a.createElement(m.a,{item:!0,xs:10,sm:7},l.a.createElement(u.a,{style:{padding:"20px 20px 20px 20px"}},l.a.createElement(m.a,{container:!0,spacing:2,direction:"column"},l.a.createElement(m.a,{item:!0,container:!0},l.a.createElement(d.a,{variant:"h6"},"\u7528\u6237\u767b\u5f55")),l.a.createElement(m.a,{item:!0},l.a.createElement(h.a,{required:!0,error:!1,id:"username",label:"\u7528\u6237\u540d",variant:"outlined",fullWidth:!0,onBlur:this.handleChangelogin})),l.a.createElement(m.a,{item:!0},l.a.createElement(h.a,{required:!0,id:"password",label:"\u5bc6\u7801",variant:"outlined",fullWidth:!0,type:"password",onBlur:this.handleChangelogin})),l.a.createElement(m.a,{item:!0,container:!0},l.a.createElement(g.a,{control:l.a.createElement(p.a,{checked:this.state.saveLogin,onChange:this.handleCheckBoxChange,color:"primary"}),label:l.a.createElement(d.a,{variant:"body2",noWrap:!0},"7\u5929\u5185\u4fdd\u6301\u767b\u5f55\u72b6\u6001")})),l.a.createElement(m.a,{item:!0},l.a.createElement(v.a,{variant:"contained",color:"primary",fullWidth:!0,size:"large",onClick:this.handleClickLogin,disabled:this.state.coolTime>0},this.getButtonName())),l.a.createElement(m.a,{item:!0,container:!0},l.a.createElement(f.b,{to:"/reset-password"},"\u5fd8\u8bb0\u5bc6\u7801?"))))),l.a.createElement(y.a,{open:this.state.openAlert,setOpen:this.setOpenAlert,info:this.state.alertInfo,severity:this.state.alertSeverity}))))}}]),a}(l.a.Component);t.default=C}}]);